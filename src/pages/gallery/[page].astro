---
import Common from "../../layouts/Common.astro";

export async function getStaticPaths({ paginate }) {
    const posts = (await Astro.glob("/src/content/illust/*.md")).sort(
        (a, b) =>
            Date.parse(b.frontmatter.date) - Date.parse(a.frontmatter.date),
    );

    return paginate(posts, { pageSize: 20 });
}
const { page } = Astro.props;
const img = await Astro.glob("/src/content/illust/*.png");
---

<Common title="倉庫">
    <main>
        <div class="container">
            {
                page.data.map((p) => {
                    const name = p.file.split("/").pop().split(".")[0];
                    return (
                        <a href={"/gallery/" + name}>
                            <img
                                class="illust"
                                src={
                                    img.filter(
                                        (p) =>
                                            p.default.src
                                                .split("/")
                                                .pop()
                                                .split(".")[0] === name,
                                    )[0].default.src
                                }
                                alt=""
                            />
                        </a>
                    );
                })
            }
        </div>
    </main>
</Common>
<style>
    .container {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
    }
    .illust {
        width: 80%;
    }
</style>
