---
import { Image } from "astro:assets";
import Top from "../../../layouts/Top.astro";

export async function getStaticPaths() {
  const posts = Object.values(
    import.meta.glob("/src/content/illust/*.png", { eager: true })
  ) as Array<any>;
  interface Obj {
    params: {
      picture: string;
    };
  }
  const pictures: Obj[] = posts.map((p) => {
    return {
      params: {
        picture: p.default.src.split("/").pop().split(".")[0],
      },
    };
  });

  return pictures;
}
const { picture } = Astro.params;
const img = (
  Object.values(
    import.meta.glob("/src/content/illust/*.png", { eager: true })
  ) as Array<any>
).filter(
  (p: any) => p.default.src.split("/").pop().split(".")[0] === picture
)[0]?.default;
---

<Top
  title={picture}
  url={Astro.url.href}
  type="article"
  description=""
  image={"https://" + Astro.url.host + img.src}
>
  <Image class="pic" src={img} alt="" format="png" />
</Top>
<style>
  .pic {
    width: 100%;
    height: auto;
  }
</style>
